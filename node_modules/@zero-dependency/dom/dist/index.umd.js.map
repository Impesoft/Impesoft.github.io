{"version":3,"file":"index.umd.js","sources":["../src/html.ts","../src/observeElement.ts","../src/waitElement.ts","../node_modules/.pnpm/@zero-dependency+emitter@1.1.1/node_modules/@zero-dependency/emitter/dist/index.es.js","../src/locationObserver.ts"],"sourcesContent":["// prettier-ignore\ntype Attributes<T extends keyof HTMLElementTagNameMap> = Partial<{\n  style: Partial<CSSStyleDeclaration>\n} & Omit<HTMLElementTagNameMap[T], 'style'>>\n\ntype Children = (string | Node | HTMLElement)[]\n\nexport function el<T extends keyof HTMLElementTagNameMap>(\n  tag: T,\n  attributes?: Children | Attributes<T>,\n  ...children: Children\n): HTMLElementTagNameMap[T] {\n  const el = document.createElement(tag)\n\n  if (typeof attributes === 'string') {\n    el.append(text(attributes))\n  } else if (Array.isArray(attributes)) {\n    el.append(...attributes)\n  } else {\n    Object.assign(el, attributes)\n    Object.assign(el.style, attributes?.style)\n  }\n\n  if (children.length) {\n    el.append(...children)\n  }\n\n  return el\n}\n\nexport function text(str: string): Text {\n  return document.createTextNode(str)\n}\n\nexport function nbsp(): Text {\n  return text('\\u00a0')\n}\n\nexport async function domReady(): Promise<void> {\n  return new Promise((resolve) => {\n    if (document.readyState == 'loading') {\n      document.addEventListener('DOMContentLoaded', () => resolve(), {\n        once: true\n      })\n    } else {\n      resolve()\n    }\n  })\n}\n","export function observeElement<T extends Element = Element>(\n  el: T,\n  callback: (mutation: MutationRecord, observer: MutationObserver) => void,\n  options?: MutationObserverInit\n) {\n  const observe = new MutationObserver((mutations, observer) => {\n    for (const mutation of mutations) {\n      callback(mutation, observer)\n    }\n  })\n\n  observe.observe(el, {\n    childList: true,\n    subtree: true,\n    ...options\n  })\n\n  return observe\n}\n","import { observeElement } from './observeElement.js'\n\nexport function waitElement<T extends Element = Element>(\n  selector: string,\n  target = document.documentElement\n): Promise<T> {\n  return new Promise((resolve) => {\n    function resolveElement() {\n      const el = target.querySelector<T>(selector)\n      if (el) {\n        resolve(el)\n      }\n    }\n\n    observeElement(target, (_, observer) => {\n      resolveElement()\n      observer.disconnect()\n    })\n  })\n}\n","class n {\n  #t = {};\n  on(t, e) {\n    const s = this.#t[t];\n    return s ? s.push(e) : this.#t[t] = [e], this;\n  }\n  addListener(t, e) {\n    return this.on(t, e);\n  }\n  once(t, e) {\n    const s = (...i) => {\n      this.off(t, s), e(...i);\n    };\n    return this.on(t, s), this;\n  }\n  emit(t, ...e) {\n    const s = this.#t[t] || [];\n    for (let i = 0; i < s.length; i++)\n      s[i](...e);\n    return Boolean(s.length);\n  }\n  off(t, e) {\n    return this.#t[t] && (this.#t[t] = this.#t[t].filter((s) => s !== e)), this;\n  }\n  removeListener(t, e) {\n    return this.off(t, e);\n  }\n  removeAllListeners(t) {\n    return t ? delete this.#t[t] : this.#t = {}, this;\n  }\n  eventNames() {\n    return Reflect.ownKeys(this.#t);\n  }\n  listeners(t) {\n    return this.#t[t];\n  }\n  listenerCount(t) {\n    return this.#t[t]?.length ?? 0;\n  }\n}\nexport {\n  n as Emitter\n};\n//# sourceMappingURL=index.es.js.map\n","import { Emitter } from '@zero-dependency/emitter'\n\ntype LocationCallback = (location: Location, state: any) => void\n\ntype Events = {\n  pushState: LocationCallback\n  replaceState: LocationCallback\n  popState: LocationCallback\n}\n\nexport class LocationObserver extends Emitter<Events> {\n  constructor() {\n    super()\n\n    const { history, location } = window\n    const { pushState, replaceState } = history\n\n    history.pushState = (...args) => {\n      pushState.apply(history, args)\n      this.emit('pushState', location, args[0])\n    }\n\n    history.replaceState = (...args) => {\n      replaceState.apply(history, args)\n      this.emit('replaceState', location, args[0])\n    }\n\n    window.addEventListener('popstate', ({ state }) => {\n      this.emit('popState', location, state)\n    })\n  }\n}\n"],"names":["el","Emitter"],"mappings":"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"}
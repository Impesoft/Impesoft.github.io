{"version":3,"file":"index.umd.js","sources":["../src/emitter.ts"],"sourcesContent":["import type { EventMap, TypedEventEmitter } from './types.js'\n\nexport class Emitter<T extends EventMap> implements TypedEventEmitter<T> {\n  #events: Record<string | number | symbol, Function[]> = {}\n\n  on<E extends keyof T>(event: E, listener: T[E]): this {\n    const listeners = this.#events[event]\n    if (listeners) {\n      listeners.push(listener)\n    } else {\n      this.#events[event] = [listener]\n    }\n\n    return this\n  }\n\n  addListener<E extends keyof T>(event: E, listener: T[E]): this {\n    return this.on(event, listener)\n  }\n\n  once<E extends keyof T>(event: E, listener: T[E]): this {\n    const onceListener = (...args: any[]) => {\n      this.off(event, onceListener as T[E])\n      listener(...args)\n    }\n\n    this.on(event, onceListener as T[E])\n\n    return this\n  }\n\n  emit<E extends keyof T>(event: E, ...args: Parameters<T[E]>): boolean {\n    const listeners = this.#events[event] || []\n    for (let i = 0; i < listeners.length; i++) {\n      listeners[i]!(...args)\n    }\n\n    return Boolean(listeners.length)\n  }\n\n  off<E extends keyof T>(event: E, listener: T[E]): this {\n    if (this.#events[event]) {\n      this.#events[event] = this.#events[event].filter((v) => v !== listener)\n    }\n\n    return this\n  }\n\n  removeListener<E extends keyof T>(event: E, listener: T[E]): this {\n    return this.off(event, listener)\n  }\n\n  removeAllListeners<E extends keyof T>(event?: E): this {\n    if (event) {\n      delete this.#events[event]\n    } else {\n      this.#events = {}\n    }\n\n    return this\n  }\n\n  eventNames(): (string | symbol | keyof T)[] {\n    return Reflect.ownKeys(this.#events)\n  }\n\n  listeners<E extends keyof T>(event: E): T[E][] {\n    return this.#events[event] as T[E][]\n  }\n\n  listenerCount<E extends keyof T>(event: E): number {\n    return this.#events[event]?.length ?? 0\n  }\n}\n"],"names":["Emitter","#events","event","listener","listeners","onceListener","args","i","v"],"mappings":"mPAEO,MAAMA,CAA4D,CACvEC,GAAwD,CAAA,EAExD,GAAsBC,EAAUC,EAAsB,CAC9C,MAAAC,EAAY,KAAKH,GAAQC,GAC/B,OAAIE,EACFA,EAAU,KAAKD,CAAQ,EAElB,KAAAF,GAAQC,GAAS,CAACC,CAAQ,EAG1B,IACT,CAEA,YAA+BD,EAAUC,EAAsB,CACtD,OAAA,KAAK,GAAGD,EAAOC,CAAQ,CAChC,CAEA,KAAwBD,EAAUC,EAAsB,CAChD,MAAAE,EAAe,IAAIC,IAAgB,CAClC,KAAA,IAAIJ,EAAOG,CAAoB,EACpCF,EAAS,GAAGG,CAAI,CAAA,EAGb,YAAA,GAAGJ,EAAOG,CAAoB,EAE5B,IACT,CAEA,KAAwBH,KAAaI,EAAiC,CACpE,MAAMF,EAAY,KAAKH,GAAQC,IAAU,CAAA,EACzC,QAASK,EAAI,EAAGA,EAAIH,EAAU,OAAQG,IAC1BH,EAAAG,GAAI,GAAGD,CAAI,EAGhB,OAAA,QAAQF,EAAU,MAAM,CACjC,CAEA,IAAuBF,EAAUC,EAAsB,CACjD,OAAA,KAAKF,GAAQC,KACV,KAAAD,GAAQC,GAAS,KAAKD,GAAQC,GAAO,OAAQM,GAAMA,IAAML,CAAQ,GAGjE,IACT,CAEA,eAAkCD,EAAUC,EAAsB,CACzD,OAAA,KAAK,IAAID,EAAOC,CAAQ,CACjC,CAEA,mBAAsCD,EAAiB,CACrD,OAAIA,EACF,OAAO,KAAKD,GAAQC,GAEpB,KAAKD,GAAU,GAGV,IACT,CAEA,YAA4C,CACnC,OAAA,QAAQ,QAAQ,KAAKA,EAAO,CACrC,CAEA,UAA6BC,EAAkB,CAC7C,OAAO,KAAKD,GAAQC,EACtB,CAEA,cAAiCA,EAAkB,CAC1C,OAAA,KAAKD,GAAQC,IAAQ,QAAU,CACxC,CACF"}